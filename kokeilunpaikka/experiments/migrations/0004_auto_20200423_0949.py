# Generated by Django 2.2.5 on 2020-04-23 09:49

from django.db import migrations, models
from django.conf import settings

def forwards_func(apps, schema_editor):
    ExperimentChallenge = apps.get_model('experiments', 'ExperimentChallenge')
    ExperimentChallengeTranslation = apps.get_model('experiments', 'ExperimentChallengeTranslation')

    for obj in ExperimentChallenge.objects.all():
        trans = obj.translations.get(language_code=settings.LANGUAGE_CODE)
        trans.lead_text = obj.lead_text_2
        trans.save()

def backwards_func(apps, schema_editor):
    ExperimentChallenge = apps.get_model('experiments', 'ExperimentChallenge')
    ExperimentChallengeTranslation = apps.get_model('experiments', 'ExperimentChallengeTranslation')

    for obj in ExperimentChallenge.objects.all():
        trans = obj.translations.get(language_code=settings.LANGUAGE_CODE)
        obj.lead_text_2 = trans.lead_text
        obj.save()

class Migration(migrations.Migration):

    dependencies = [
        ('experiments', '0003_auto_20200417_1058'),
    ]

    operations = [
        migrations.RenameField(
            model_name='experimentchallenge',
            old_name='lead_text',
            new_name='lead_text_2',
        ),
        migrations.AddField(
            model_name='experimentchallengetranslation',
            name='lead_text',
            field=models.TextField(blank=True, help_text='Emphasized opening content of the challenge.', verbose_name='lead text'),
        ),
        migrations.RunPython(forwards_func, backwards_func),
    ]
